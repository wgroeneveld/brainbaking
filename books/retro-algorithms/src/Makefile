
all:
	pandoc -f markdown \
		-V documentclass=tufte-book \
		--include-in-header=preamble.tex \
		--include-before-body=voorblad.tex \
		--include-after-body=afterbody.tex \
		--pdf-engine=xelatex \
		--natbib \
		--template=res/pandoc/pandoc-tufte.tex \
		--top-level-division=part \
		--metadata-file=metadata.yml \
		-t latex+smart \
		--highlight-style=haddock > boek.tex \
		chapters/ch-handheld-gba.md chapters/ch-cartridges.md
	python res/pandoc/postprocessor.py
	xelatex boek.tex
	#bibtex boek
	#xelatex boek.tex
	#echo "-- DONE"
	#chapters/intro.md chapters/ch-handheld-gb.md chapters/ch-handheld-gba.md chapters/ch-wario.md chapters/ch-x.md

pages:
	exiftool boek.pdf | grep 'Page Count'
	du -h boek.pdf 

clean:
	# source tex file
	rm -rf boek.tex
	
	# files generated by xelatex
	rm -rf *.aux
	rm -rf *.log
	rm -rf *.out
	rm -rf *.lof
	rm -rf *.lot
	rm -rf *.ilg
	rm -rf *.idx
	rm -rf *.ind
	rm -rf *.toc

	# built pdf file
	rm -rf *.pdf
