
# template generated with: pandoc -D latex+smart

all:
	pandoc -f markdown \
		-V documentclass=tufte-book \
		--include-in-header=preamble.tex \
		--include-before-body=voorblad.tex \
		--include-after-body=afterbody.tex \
		--pdf-engine=xelatex \
		--natbib \
		--template=templates/pandoc-tufte.tex \
		--top-level-division=part \
		--metadata-file=metadata.yml \
		-t latex+smart \
		--highlight-style=haddock > boek.tex \
		chapters/intro.md chapters/ch-handheld.md chapters/ch-wario.md chapters/ch-x.md
	python filters/postprocessor.py
	xelatex boek.tex
	#bibtex boek
	#pdflatex boek.tex
	#echo "UIT"

pages:
	exiftool boek.pdf | grep 'Page Count'

clean:
	# source tex file
	rm -rf boek.tex
	
	# files generated by pdflatex
	rm -rf *.aux
	rm -rf *.log
	rm -rf *.out
	rm -rf *.lof
	rm -rf *.lot
	rm -rf *.ilg
	rm -rf *.idx
	rm -rf *.ind
	rm -rf *.toc

	# built pdf file
	rm -rf *.pdf
