<!DOCTYPE html>
<html lang="en-us">
    <head>
        <link rel="stylesheet" href="https://brainbaking.com/css/brainbaking.css">



	<meta name="description" content="Labo x: Design Patterns: Facade - Brain Baking">
	<meta content="Labo x: Design Patterns: Facade - Brain Baking" property="og:title">
	<meta content="Labo x: Design Patterns: Facade - Brain Baking" property="og:description">




<meta property="og:url" content="https://brainbaking.com/teaching/ses/facade/" />
<meta property="og:type" content="website" />





<meta property="article:published_time" content="0001-01-01 00:00:00 &#43;0000 UTC" />
<meta property="article:modified_time" content="0001-01-01 00:00:00 &#43;0000 UTC" />
<meta property="article:section" content="teaching" />




<script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/brainbaking.com\/"
    },
    "articleSection" : "teaching",
    "name" : "Labo x: Design Patterns: Facade",
    
      "headline" : "Labo x: Design Patterns: Facade",
    
    "description" : "",
    
      "inLanguage" : "nl-BE",
    
    
      "image": "https:\/\/brainbaking.com\/img/avatar-icon.png",
    
    "author" : {
    	"@type": "Person",
    	"name": "Wouter Groeneveld"
	  },
    "publisher": {
    	"@type": "Organization",
    	"name": "Brain Baking",
    	"logo": {
    		"@type": "ImageObject",
    		"url": "https:\/\/brainbaking.com\/img/avatar-icon.png"
    	}
	  },
    "accountablePerson" : "Wouter Groeneveld",
    "copyrightHolder" : "Wouter Groeneveld",
    "copyrightYear" : "0001",
    "datePublished": "2019-11-26 15:48:47 \x2b0100 CET",
    "dateModified" : "2019-11-26 15:48:47 \x2b0100 CET",
    "url" : "https:\/\/brainbaking.com\/teaching\/ses\/facade\/",
    "wordCount" : "598",
    "keywords" : [ "Labo x: Design Patterns: Facade", "teaching" ]
}
</script>



<script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-45748221-1', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Labo x: Design Patterns: Facade</title>
        
        <style>

    html body {
        font-family: 'Source Serif Pro', sans-serif;
        background-color: white;
    }

    :root {
    	--accent: #008eb3;
        --border-width:  5px ;
    }

</style>


<link rel="stylesheet" href="https://brainbaking.com/css/main.css">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source%20Serif%20Pro">


 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/paraiso-dark.min.css"> 


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
 


    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

     <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/cs.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/cpp.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scheme.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/llvm.min.js"></script> 

    <script>hljs.initHighlightingOnLoad();</script>







<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<script>$(document).on('click', function() { $('.collapse').collapse('hide'); })</script>
 <meta name="generator" content="Hugo 0.59.1" />
        
        <link href="https://brainbaking.com/teaching/ses/facade/index.xml" rel="alternate" type="application/rss+xml" title="Brain Baking" />
        <link href="https://brainbaking.com/teaching/ses/facade/index.xml" rel="feed" type="application/rss+xml" title="Brain Baking" />
        
    </head>

    
    
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    

    <body>
         
        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">

                <div class="navbar-header">

                    <a class="navbar-brand visible-xs" href="#">Labo x: Design Patterns: Facade</a>

                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                </div>

                <div class="collapse navbar-collapse">

                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="/post"><i class='fa fa-file-code-o'></i>&nbsp;Tech Blog</a></li>
                            
                                <li><a href="/essays"><i class='fa fa-book'></i>&nbsp;Essays</a></li>
                            
                                <li><a href="/tags"><i class='fa fa-tags'></i>&nbsp;Tags</a></li>
                            
                        </ul>
                    

                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li><a href="/about"><i class='fa fa-user'></i>&nbsp;About Me</a></li>
                            
                                <li><a href="/teaching"><i class='fa fa-graduation-cap'></i>&nbsp;Teaching</a></li>
                            
                        </ul>
                    

                </div>

            </div>

        </nav>


<main>

	
	    <h2>
			<i class='fa '></i>&nbsp;Labo x: Design Patterns: Facade
		</h2>
	    <hr/>
    

    
    <div class="text-justify">
    	

<p>&laquo;&nbsp;<a href="/teaching/ses">Terug naar Software Engineering Skills</a><br/>
&raquo;&nbsp;<a href="#oef">Naar de labo opgave</a></p>

<h2 id="facade-design-pattern"><em>&ldquo;Facade&rdquo;</em> - Design Pattern</h2>

<h3 id="doelstelling">Doelstelling</h3>

<ul>
<li>Scherm een complex stukje software af met behulp van een simpele interface</li>
<li>Voorzie éénzelfde interface naar een set van verschillende mogelijke subsystemen. Een Facade is een high-level interface die mogelijks low-level systemen aanspreekt.</li>
</ul>

<p><a href="https://sourcemaking.com/design_patterns/facade">Dive Into Design Patterns: Facade</a></p>

<h3 id="voorbeeld">Voorbeeld</h3>

<h4 id="1-opzet">1. Opzet</h4>

<p>Stel dat we gegevens van de klant moeten versturen naar een overheidsinstantie. Die instantie beschikt jammer genoeg niet over voldoende budgetten om ook een cutting-edge server interface en implementatie aan te bieden. Het komt er op neer dat we verplicht zijn om tekst bestanden op een FTP server te plaatsen.</p>

<pre><code class="language-java">class ClientFtpSender {
    public void upload(Client client) {
        // create ftp connection, upload, ...
    }
}
</code></pre>

<p>Deze code gebruiken we als de gebruiker op een knop genaamd <code>export</code>
 klikt:</p>

<pre><code class="language-java">class ClientHTTPHandler {
    private ClientRepository clientRepository;
    public HTTPResponse onExport(int clientId) {
        Client client = clientRepository.getById(clientId);
        new ClientFtpSender().upload(client);
        return HTTPResponse.success();  // 200 OK
    }
}
</code></pre>

<link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
<script defer src="/mermaid/mermaid.min.js">
	mermaid.initialize({
		startOnLoad: true,
		flowchart: {
			useMaxWidth: true
		}
	});
</script>
<div class="mermaid" align="center" >
	
graph LR;
    A[HTTP Handler]
    B[FTP Sender]
    A --> B

</div>

<h4 id="2-probleemstelling">2. Probleemstelling</h4>

<p>We verkopen onze software aan een andere partij, die niet alleen met de overheid wenst te communiceren, maar ook met een derde instantie. Deze instantie biedt ons de mogelijkheid aan om de klant in de vorm van XML met een <code>POST</code> HTTPS call op te sturen. Onze <code>ClientFTPSender</code> is dus niet meer genoeg:</p>

<pre><code class="language-java">
class ClientPOSTSender {
    public void upload(Client client) {
        // secure HTTPS, encode client in XML, post...
    }
}
</code></pre>

<p>Deze complexe stukjes software, de <code>POST</code> en <code>FTP</code> senders, willen we niet langer rechtstreeks aanspreken in de HTTP handler. Het is zo dat afhankelijk van een bepaalde instelling, het ene of het andere gebruikt kan worden.</p>

<h4 id="3-oplossing">3. Oplossing</h4>

<p>We hebben dus <strong>een facade</strong> nodig, die de juiste delegaties voor ons doorvoert, zoals in het volgende schema:</p>

<link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
<script defer src="/mermaid/mermaid.min.js">
	mermaid.initialize({
		startOnLoad: true,
		flowchart: {
			useMaxWidth: true
		}
	});
</script>
<div class="mermaid" align="center" >
	
graph LR;
    A[HTTP Handler]
    POST[POST Sender]
    FTP[FTP Sender]
    F{Facade}
    A --> F
    F -.-> POST
    F -.-> FTP

</div>

<p>Waarbij de Facade een klasse is die de details &ldquo;wegstopt&rdquo; voor onze HTTP handler:</p>

<pre><code class="language-java">class UploadClientFacade {
    public void upload(Client client) {
        if(settings.isPOST()) {
            new ClientPOSTSender().upload(client);
        } else if(settings.isFTP()) {
            new ClientFtpSender().upload(client);
        } else {
            throw new UnsupportedOperationException(&quot;settings?&quot;);
        }
    }
}
</code></pre>

<h3 id="eigenschappen-van-dit-patroon">Eigenschappen van dit patroon</h3>

<ul>
<li>Een Facade is een <em>nieuwe interface</em>, niet eentje die oude interfaces herbruikt (Adapter). Beide zijn een soort van <strong>&ldquo;wrappers&rdquo;</strong>, die onderliggende implementaties verbergen voor de hogerliggende interface - in ons geval de <code>ClientHTTPHandler</code>.</li>
<li>Het verschil tussen een Facade en een Factory is dat de facade alles verbergt en <strong>logica uitvoert</strong>, terwijl de Factory enkel de juiste instanties <strong>aanmaakt</strong> en teruggeeft. In dat geval zou de handler nog steeds <code>upload()</code> zelf moeten uitvoeren, inclusief eventuele encoding stappen.</li>
</ul>

<h2 id="a-name-oef-a-labo-oefeningen"><a name="oef"></a>Labo oefeningen</h2>

<ul>
<li><a href="/teaching/ses/facade.zip">Download IntelliJ facade.zip project hier</a>. We modelleren een dierentuin, waarvan een <code>be.kuleuven.ses.facade.animals.Chicken</code> een gegeven klasse is. Elk dier willen we voederen met de <code>feed()</code> methode. Let op! Sommige dieren vereisten veel meer aandracht (lees: complexiteit), die we willen wegwerken met het introduceren van een Facade. Voeg klasses <code>be.kuleuven.ses.facade.animals.Cow</code> en <code>Cat</code> toe, geef deze ook eten, en verberg dan het voederen in een aparte interface.</li>
<li><a href="/teaching/ses/sessy">sessy library</a>:

<ol>
<li>identificeer waar jij denkt dat een facade nodig zou kunnen zijn. Waar moet logica worden afgeschermd?</li>
<li>Pas het patroon toe waar jij denkt dat het nodig is.</li>
</ol></li>
</ul>

<h2 id="denkvragen">Denkvragen</h2>

<ul>
<li>Op welk moment beslis je dat een Facade écht nodig is? Is het mogelijk om ook een facade te maken zonder bijvoorbeeld nieuwe dieren in oefening 1 of een nieuwe verzendmethode voor de klant bij de probleemstelling?</li>
<li>Kan een Facade een Facade verbergen? Wanneer is dat nodig, of niet?</li>
</ul>

	</div>
    <hr/>
	

	


</main>

        <footer>

            <p class="copyright text-muted">No <i class='fa fa-copyright'></i> reserved - sharing is caring. <i class='fa fa-github'></i> <a href='https://github.com/wgroeneveld/brainbaking/'>Hack away</a>! <i class='fa fa-lightbulb-o'></i> <a href='/'>Brain Baking</a></p>

        </footer>
       
    </body>

</html>

